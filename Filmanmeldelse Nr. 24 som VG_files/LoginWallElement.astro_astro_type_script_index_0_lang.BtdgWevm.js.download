import{g as i,s as r,a as s}from"./chunk-PXWMJYNN.WLwigf80.js";class l extends HTMLElement{static observedAttributes=["is-logged-in"];_eventController=null;_internals;constructor(){super(),this._internals=this.attachInternals()}attributeChangedCallback(e,t,n){e==="is-logged-in"&&(n==="true"?(this._internals.states.add("is-logged-in"),this.renderLoggedIn()):(this._internals.states.delete("is-logged-in"),this.renderNotLoggedIn()))}async checkLoginState(){const e=await i();if(!e)return console.error("Identity not found");const t=await e.isLoggedIn();this.setAttribute("is-logged-in",String(t))}connectedCallback(){this.checkLoginState()}renderLoggedIn(){this._eventController?.abort(),this.querySelector(".login-button")?.remove()}renderNotLoggedIn(){const e=this.querySelector(".login-template");e instanceof HTMLTemplateElement&&this.prepend(e.content.cloneNode(!0)),this._eventController=new AbortController,this.querySelector(".login-button")?.addEventListener("click",async()=>{const t=await i();if(!t)return console.error("Identity not found");const n=new URL(window.location.href);n.hash="vg-comments";const o=r({medium:"read-comments",returnUrl:n.toString()});t.login({loginHint:await s(t),state:o,originCampaign:"article-read-comments",xEnvironmentId:await window.nmTrackerSync?.pulseTracker.getEnvironmentId(),xDomainId:window.nmTrackerSync?.pulseTracker?.getPageViewId()})},{signal:this._eventController.signal})}}const a=()=>{customElements.get("vg-require-login")||customElements.define("vg-require-login",l)};a();
//# sourceMappingURL=LoginWallElement.astro_astro_type_script_index_0_lang.BtdgWevm.js.map
