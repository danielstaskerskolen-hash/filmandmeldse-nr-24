import{_ as o}from"./preload-helper.Ct5FWWRu.js";import{g as s}from"./chunk-PXWMJYNN.WLwigf80.js";import{c}from"./chunk-3MEEZGOJ.C82uupIQ.js";import{a as d,b as u}from"./chunk-QGFU6EMK.Bqh5bOln.js";const r=(a,{elementId:t,elementName:e,target:n})=>{window.pulse?.(i=>{i.track("trackerEvent",{type:a,action:a,object:{"@id":`sdrn:vg:article:${document.documentElement.dataset.id}:element:${t}`,type:"UIElement",name:e},target:n})})};class m extends HTMLElement{position="0";type="article";constructor(){super(),this.position=this.dataset.position||"0",this.type=this.dataset.type||"article",this.hidden=!0}connectedCallback(){this.initializeBraze()}async initializeBraze(){await this.waitForConsent();const t=await s();if(!t)return console.warn("[@vgno/braze] Identity not found");if(!await t.isLoggedIn()||!await c(["47001"]))return;const e=await o(()=>import("https://esm.vg.no/@braze/web-sdk@5.9.0"),[],import.meta.url);e.initialize("d1240f31-a44b-4a02-9d5a-30677794528d",{baseUrl:"sdk.fra-01.braze.eu",doNotLoadFontAwesome:!0});const n=await t.getUserId();e.changeUser(`sdrn:spid.no:user:${n}`),e.openSession(),e.subscribeToInAppMessage(function(i){r("View",{elementId:"braze-slideup",elementName:`braze-slideup: ${i.message}`,target:{url:i.uri||"braze-button-without-href"}}),i.subscribeToClickedEvent(function(){r("Click",{elementId:"braze-slideup",elementName:`braze-slideup: ${i.message}`,target:{url:i.uri||"braze-button-without-href"}})}),e.showInAppMessage(i)})}waitForConsent(){return new Promise(t=>{d("CMP:marketing").then(e=>{if(e==="1"){t();return}u("CMP:marketing",n=>{n==="1"&&t()})})})}}customElements.get("braze-container")||customElements.define("braze-container",m);
//# sourceMappingURL=Braze.astro_astro_type_script_index_0_lang.DqJdSDVv.js.map
